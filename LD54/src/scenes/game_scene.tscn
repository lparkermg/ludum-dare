[gd_scene load_steps=12 format=3 uid="uid://bv7pd1to17sry"]

[ext_resource type="TileSet" uid="uid://cpx8b0h2rlvpg" path="res://resources/tile_sets/test_tiles.tres" id="2_5f2n6"]
[ext_resource type="Script" path="res://scripts/game/main/map/map_controller.gd" id="2_lmklw"]
[ext_resource type="Script" path="res://scripts/game/ui/ui_controller.gd" id="4_1l4at"]
[ext_resource type="Script" path="res://scripts/game/main/deity/deity_system.gd" id="4_rjtb8"]
[ext_resource type="Texture2D" uid="uid://blhon4vlincpo" path="res://graphics/ui/icons/settlements_icon.png" id="5_atryx"]
[ext_resource type="Script" path="res://scripts/game/main/islanders/islanders_system.gd" id="5_lpbdl"]
[ext_resource type="Texture2D" uid="uid://brh7qke57d4s4" path="res://graphics/ui/icons/settlers_icon.png" id="6_8ggcj"]
[ext_resource type="Texture2D" uid="uid://dauaxxsw48btx" path="res://graphics/ui/icons/worship_amount_icon.png" id="7_3dqvk"]
[ext_resource type="Texture2D" uid="uid://qkp8v2safj7j" path="res://graphics/ui/icons/deity_points_icon.png" id="8_m6olh"]

[sub_resource type="Curve" id="Curve_eol8s"]
max_value = 10.0
_data = [Vector2(0, 0), 0.0, 0.0, 0, 0, Vector2(1, 10), -1.0, 0.0, 0, 0]
point_count = 2

[sub_resource type="Curve" id="Curve_n5jwj"]
max_value = 2.0
_data = [Vector2(0, 0), 0.0, 0.0, 0, 0, Vector2(1, 2), 0.0, 0.0, 0, 0]
point_count = 2

[node name="game_scene" type="Control"]
layout_mode = 3
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2

[node name="game_display" type="Node2D" parent="." node_paths=PackedStringArray("deity_system")]
script = ExtResource("2_lmklw")
deity_system = NodePath("../diety")

[node name="Island" type="TileMap" parent="game_display"]
tile_set = ExtResource("2_5f2n6")
cell_quadrant_size = 32
format = 2
layer_0/name = "base"
layer_0/tile_data = PackedInt32Array(0, 65537, 0, 65536, 65537, 0, 131072, 65537, 0, 196608, 65537, 0, 196609, 65537, 0, 262145, 65537, 0, 327681, 65537, 0, 393217, 65537, 0, 393216, 65537, 0, 327680, 65537, 0, 262144, 65537, 0, 65537, 65537, 0, 1, 65537, 0, 2, 65537, 0, 3, 65537, 0, 4, 65537, 0, 5, 65537, 0, 6, 65537, 0, 7, 65537, 0, 8, 65537, 0, 9, 65537, 0, 10, 65537, 0, 11, 65537, 0, 65547, 65537, 0, 131083, 65537, 0, 196619, 65537, 0, 262155, 65537, 0, 327691, 65537, 0, 393227, 65537, 0, 393226, 65537, 0, 393225, 65537, 0, 393224, 65537, 0, 393223, 65537, 0, 393222, 65537, 0, 393221, 65537, 0, 393220, 65537, 0, 393219, 65537, 0, 458755, 65537, 0, 458754, 65537, 0, 393218, 65537, 0, 327682, 65537, 0, 327683, 1, 0, 327684, 1, 0, 327685, 1, 0, 327686, 1, 0, 327687, 1, 0, 327688, 65537, 0, 327689, 65537, 0, 327690, 65537, 0, 262154, 65537, 0, 196618, 65537, 0, 196617, 65537, 0, 262152, 1, 0, 262151, 1, 0, 262150, 1, 0, 262149, 1, 0, 262148, 1, 0, 262147, 1, 0, 262146, 1, 0, 262153, 1, 0, 196616, 1, 0, 196615, 1, 0, 196614, 1, 0, 196613, 1, 0, 131076, 1, 0, 196612, 1, 0, 196611, 1, 0, 196610, 1, 0, 131073, 65537, 0, 131074, 65537, 0, 131075, 1, 0, 131077, 1, 0, 131078, 1, 0, 131079, 65537, 0, 131080, 65537, 0, 131081, 65537, 0, 131082, 65537, 0, 65546, 65537, 0, 65545, 65537, 0, 65544, 65537, 0, 65543, 65537, 0, 65542, 65537, 0, 65541, 65537, 0, 65540, 65537, 0, 65539, 65537, 0, 65538, 65537, 0, 458752, 65537, 0, 458753, 65537, 0, 458756, 65537, 0, 458757, 65537, 0, 458758, 65537, 0, 458759, 65537, 0, 458762, 65537, 0, 458763, 65537, 0, 458761, 65537, 0, 458760, 65537, 0)
layer_1/name = "placements"
layer_1/enabled = true
layer_1/modulate = Color(1, 1, 1, 1)
layer_1/y_sort_enabled = false
layer_1/y_sort_origin = 0
layer_1/z_index = 1
layer_1/tile_data = PackedInt32Array()
layer_2/name = "cursor"
layer_2/enabled = true
layer_2/modulate = Color(1, 1, 1, 1)
layer_2/y_sort_enabled = false
layer_2/y_sort_origin = 0
layer_2/z_index = 2
layer_2/tile_data = PackedInt32Array(0, 1, 1)

[node name="diety" type="Node" parent="." node_paths=PackedStringArray("ui_controller", "map_controller", "islander_system")]
script = ExtResource("4_rjtb8")
ui_controller = NodePath("../ui")
map_controller = NodePath("../game_display")
islander_system = NodePath("../islanders")

[node name="ui" type="Control" parent="." node_paths=PackedStringArray("deity_system", "place_wonder_button", "place_settlement_button", "activate_lightning_disaster", "activate_flood_disaster", "activate_earthquake_disaster", "activate_fire_disaster", "disaster_disable_timer", "settlements_label", "settlers_label", "worship_label", "deity_points_label")]
layout_mode = 1
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
script = ExtResource("4_1l4at")
deity_system = NodePath("../diety")
place_wonder_button = NodePath("main_area/action_area/PlaceWonderButton")
place_settlement_button = NodePath("main_area/action_area/PlaceSettlementButton2")
activate_lightning_disaster = NodePath("main_area/action_area/LightningDisasterButton")
activate_flood_disaster = NodePath("main_area/action_area/FloodDisasterButton")
activate_earthquake_disaster = NodePath("main_area/action_area/EarthquakeDisasterButton")
activate_fire_disaster = NodePath("main_area/action_area/FireDisasterButton")
disaster_disable_timer = NodePath("disaster_disable_timer")
settlements_label = NodePath("main_area/status_area/settlements_item/MarginContainer/HBoxContainer/Label")
settlers_label = NodePath("main_area/status_area/settlers_item/MarginContainer/HBoxContainer/Label")
worship_label = NodePath("main_area/status_area/worship_item/MarginContainer/HBoxContainer/Label")
deity_points_label = NodePath("main_area/status_area/deity_points_item/MarginContainer/HBoxContainer/Label")

[node name="main_area" type="VBoxContainer" parent="ui"]
layout_mode = 1
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2

[node name="status_area" type="HFlowContainer" parent="ui/main_area"]
layout_mode = 2
size_flags_vertical = 2
alignment = 2

[node name="settlements_item" type="PanelContainer" parent="ui/main_area/status_area"]
custom_minimum_size = Vector2(64, 32)
layout_mode = 2

[node name="MarginContainer" type="MarginContainer" parent="ui/main_area/status_area/settlements_item"]
layout_mode = 2
theme_override_constants/margin_left = 2
theme_override_constants/margin_top = 2
theme_override_constants/margin_right = 2
theme_override_constants/margin_bottom = 2

[node name="HBoxContainer" type="GridContainer" parent="ui/main_area/status_area/settlements_item/MarginContainer"]
layout_mode = 2
size_flags_vertical = 4
columns = 2

[node name="Icon" type="TextureRect" parent="ui/main_area/status_area/settlements_item/MarginContainer/HBoxContainer"]
layout_mode = 2
texture = ExtResource("5_atryx")

[node name="Label" type="Label" parent="ui/main_area/status_area/settlements_item/MarginContainer/HBoxContainer"]
layout_mode = 2
text = "settlements"
horizontal_alignment = 1

[node name="settlers_item" type="PanelContainer" parent="ui/main_area/status_area"]
custom_minimum_size = Vector2(64, 32)
layout_mode = 2

[node name="MarginContainer" type="MarginContainer" parent="ui/main_area/status_area/settlers_item"]
layout_mode = 2
theme_override_constants/margin_left = 2
theme_override_constants/margin_top = 2
theme_override_constants/margin_right = 2
theme_override_constants/margin_bottom = 2

[node name="HBoxContainer" type="GridContainer" parent="ui/main_area/status_area/settlers_item/MarginContainer"]
layout_mode = 2
size_flags_vertical = 4
columns = 2

[node name="Icon" type="TextureRect" parent="ui/main_area/status_area/settlers_item/MarginContainer/HBoxContainer"]
layout_mode = 2
texture = ExtResource("6_8ggcj")

[node name="Label" type="Label" parent="ui/main_area/status_area/settlers_item/MarginContainer/HBoxContainer"]
layout_mode = 2
text = "settlers"
horizontal_alignment = 1

[node name="worship_item" type="PanelContainer" parent="ui/main_area/status_area"]
custom_minimum_size = Vector2(64, 32)
layout_mode = 2

[node name="MarginContainer" type="MarginContainer" parent="ui/main_area/status_area/worship_item"]
layout_mode = 2
theme_override_constants/margin_left = 2
theme_override_constants/margin_top = 2
theme_override_constants/margin_right = 2
theme_override_constants/margin_bottom = 2

[node name="HBoxContainer" type="GridContainer" parent="ui/main_area/status_area/worship_item/MarginContainer"]
layout_mode = 2
size_flags_vertical = 4
columns = 2

[node name="Icon" type="TextureRect" parent="ui/main_area/status_area/worship_item/MarginContainer/HBoxContainer"]
layout_mode = 2
texture = ExtResource("7_3dqvk")

[node name="Label" type="Label" parent="ui/main_area/status_area/worship_item/MarginContainer/HBoxContainer"]
layout_mode = 2
text = "worship amount"
horizontal_alignment = 1

[node name="deity_points_item" type="PanelContainer" parent="ui/main_area/status_area"]
custom_minimum_size = Vector2(64, 32)
layout_mode = 2

[node name="MarginContainer" type="MarginContainer" parent="ui/main_area/status_area/deity_points_item"]
layout_mode = 2
theme_override_constants/margin_left = 2
theme_override_constants/margin_top = 2
theme_override_constants/margin_right = 2
theme_override_constants/margin_bottom = 2

[node name="HBoxContainer" type="GridContainer" parent="ui/main_area/status_area/deity_points_item/MarginContainer"]
layout_mode = 2
size_flags_vertical = 4
columns = 2

[node name="Icon" type="TextureRect" parent="ui/main_area/status_area/deity_points_item/MarginContainer/HBoxContainer"]
layout_mode = 2
texture = ExtResource("8_m6olh")

[node name="Label" type="Label" parent="ui/main_area/status_area/deity_points_item/MarginContainer/HBoxContainer"]
layout_mode = 2
text = "deity points"
horizontal_alignment = 1

[node name="spacer" type="Control" parent="ui/main_area"]
layout_mode = 2
size_flags_vertical = 3

[node name="action_area" type="HFlowContainer" parent="ui/main_area"]
layout_mode = 2
alignment = 1

[node name="PlaceWonderButton" type="Button" parent="ui/main_area/action_area"]
layout_mode = 2
text = "Place
Wonder"

[node name="PlaceSettlementButton2" type="Button" parent="ui/main_area/action_area"]
layout_mode = 2
text = "Place
Settlement"

[node name="LightningDisasterButton" type="Button" parent="ui/main_area/action_area"]
layout_mode = 2
text = "Lightning"

[node name="FloodDisasterButton" type="Button" parent="ui/main_area/action_area"]
layout_mode = 2
text = "Flood"

[node name="EarthquakeDisasterButton" type="Button" parent="ui/main_area/action_area"]
layout_mode = 2
text = "Earthquake"

[node name="FireDisasterButton" type="Button" parent="ui/main_area/action_area"]
layout_mode = 2
text = "Fire"

[node name="disaster_disable_timer" type="Timer" parent="ui"]
wait_time = 5.0
one_shot = true

[node name="islanders" type="Node" parent="." node_paths=PackedStringArray("deity_system", "settler_spawn_timer", "worship_increase_timer", "deity_points_increase_timer")]
script = ExtResource("5_lpbdl")
deity_system = NodePath("../diety")
settler_spawn_timer = NodePath("settler_spawn_timer")
worship_increase_timer = NodePath("worship_increase_timer")
deity_points_increase_timer = NodePath("deity_points_timer")
worship_curve = SubResource("Curve_eol8s")
deity_points_curve = SubResource("Curve_n5jwj")

[node name="settler_spawn_timer" type="Timer" parent="islanders"]
wait_time = 10.0

[node name="worship_increase_timer" type="Timer" parent="islanders"]
wait_time = 2.0

[node name="deity_points_timer" type="Timer" parent="islanders"]
